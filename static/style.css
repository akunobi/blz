:root {
    --bl-cyan: #00f2ff;
    --bl-dark: #020203;
    --text-main: #fff;
    --font-impact: 'Koulen', sans-serif;
    --font-tech: 'Rajdhani', sans-serif;
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
    background-color: var(--bl-dark);
    color: var(--text-main);
    font-family: var(--font-tech);
    height: 100vh; overflow: hidden;
}

/* AMBIENTE */
.chaos-bg {
    position: fixed; inset: 0; z-index: -2;
    background: radial-gradient(circle at 50% 100%, #0a0a2a 0%, #000 80%);
}
.puzzle-overlay {
    position: fixed; inset: 0; z-index: -1; opacity: 0.05;
    background-image: repeating-linear-gradient(45deg, #fff 0, #fff 1px, transparent 0, transparent 50%);
    background-size: 20px 20px;
}

/* LAYOUT */
.fragmented-layout { position: relative; width: 100vw; height: 100vh; overflow: hidden; }

/* 1. CANALES */
.shard-column {
    position: absolute; left: 40px; top: 100px; bottom: 100px; width: 250px;
    display: flex; flex-direction: column;
}
.shard-title {
    font-family: var(--font-impact); font-size: 3rem; color: rgba(255,255,255,0.1);
    transform: rotate(-90deg) translateX(-100px); position: absolute; left: -120px; top: 50%;
    pointer-events: none;
}
.shard-container {
    flex: 1; overflow-y: auto; overflow-x: visible; padding: 20px 0;
    scrollbar-width: none;
}
.shard-container::-webkit-scrollbar { display: none; }

.channel-shard {
    display: block; width: 100%;
    background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1);
    color: #888; padding: 15px; margin-bottom: 20px;
    font-family: var(--font-impact); letter-spacing: 1px;
    cursor: pointer; transition: 0.4s; backdrop-filter: blur(5px);
}
.channel-shard:nth-child(odd) { transform: translateX(0px) skewX(-10deg); width: 90%; }
.channel-shard:nth-child(even) { transform: translateX(30px) skewX(10deg); width: 80%; text-align: right; }
.channel-shard:hover {
    background: var(--bl-cyan); color: #000;
    transform: scale(1.1) translateX(20px) !important;
    box-shadow: 0 0 30px var(--bl-cyan); border: none; z-index: 10;
}
.channel-shard.active {
    background: #fff; color: #000; transform: scale(1.05);
    box-shadow: 0 0 50px rgba(255,255,255,0.5); z-index: 5;
}

/* 2. CHAT & HUD */
.void-chat-area {
    position: absolute; top: 100px; bottom: 50px;
    left: 350px; right: 50px;
    display: flex; flex-direction: column;
}

.floating-feed {
    flex: 1; overflow-y: auto; padding-right: 20px;
    display: flex; flex-direction: column; gap: 20px;
}

/* HUD INFERIOR */
.target-analysis-panel {
    height: 90px; margin-top: 20px; margin-right: 150px; /* Espacio para el bot√≥n stats */
    background: rgba(0,0,0,0.8); border: 1px solid #333; border-left: 4px solid var(--bl-cyan);
    display: flex; flex-direction: column; padding: 10px 20px;
    opacity: 0; transform: translateY(20px); transition: 0.5s;
}
.target-analysis-panel.visible { opacity: 1; transform: translateY(0); }

.hud-line { width: 100%; height: 1px; background: linear-gradient(90deg, var(--bl-cyan), transparent); margin-bottom: 5px; }
.hud-content { display: flex; gap: 50px; align-items: center; height: 100%; }
.hud-data { display: flex; flex-direction: column; }
.hud-label { font-size: 0.7rem; color: #666; font-family: var(--font-impact); letter-spacing: 1px; }
.hud-value { font-size: 1.4rem; font-family: var(--font-tech); color: #fff; text-shadow: 0 0 5px var(--bl-cyan); }
.hud-value.active { color: var(--bl-cyan); text-transform: uppercase; }

/* MENSAJES */
.msg-fragment {
    max-width: 70%;
    background: linear-gradient(90deg, rgba(0,0,0,0.8), rgba(0, 242, 255, 0.05));
    border-left: 2px solid var(--bl-cyan); padding: 10px 20px;
    clip-path: polygon(0 0, 100% 0, 98% 100%, 0 100%);
}
.msg-fragment:hover { border-left-width: 5px; background: rgba(0, 242, 255, 0.1); }
.msg-meta { font-size: 0.8rem; color: var(--bl-cyan); font-weight: 700; text-transform: uppercase; margin-bottom: 5px;}
.msg-text { font-size: 1rem; color: #eee; line-height: 1.4; }
.initial-lock { margin: auto; text-align: center; opacity: 0.3; }
.lock-icon { font-size: 4rem; animation: pulse 2s infinite; }

/* 3. INPUT */
.trigger-input {
    position: absolute; top: 30px; right: 40px;
    width: 400px; display: flex; z-index: 100; transform: rotate(1deg);
}
#msg-input {
    flex: 1; background: rgba(0,0,0,0.8); border: 1px solid #fff;
    color: #fff; padding: 15px; font-family: var(--font-tech); font-size: 1.1rem; outline: none;
}
#msg-input:focus { border-color: var(--bl-cyan); box-shadow: 0 0 20px rgba(0,242,255,0.2); }
#send-btn {
    background: #fff; color: #000; border: none; padding: 0 25px;
    font-family: var(--font-impact); font-size: 1.2rem; cursor: pointer; transition: 0.2s;
}
#send-btn:hover { background: var(--bl-cyan); letter-spacing: 2px; }

/* 4. REACTOR (ESQUINA INFERIOR DERECHA) */
.reactor-container-right {
    position: absolute; bottom: 40px; right: 40px;
    z-index: 90;
}
.ego-reactor-btn {
    width: 90px; height: 90px;
    background: #000; border: none; outline: none; position: relative;
    display: flex; justify-content: center; align-items: center; cursor: pointer;
}
.reactor-core { color: var(--bl-cyan); font-family: var(--font-impact); font-size: 1.2rem; z-index: 2; transition: 0.3s; }
.reactor-ring {
    position: absolute; inset: 0; border: 2px dashed var(--bl-cyan); border-radius: 50%;
    animation: reactor-spin 10s linear infinite;
}
.reactor-ring::before { content: ''; position: absolute; inset: -5px; border: 1px solid rgba(255,255,255,0.2); border-radius: 50%; }
.ego-reactor-btn:hover .reactor-ring {
    border-style: solid; box-shadow: 0 0 30px var(--bl-cyan), inset 0 0 20px var(--bl-cyan);
    animation: reactor-spin 2s linear infinite;
}
.ego-reactor-btn:hover .reactor-core { color: #fff; letter-spacing: 1px; }
@keyframes reactor-spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

/* DRAWER & MODAL (Standard) */
.evolution-drawer {
    position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 200;
    clip-path: circle(0% at 90% 90%); /* Abre desde la esquina derecha */
    transition: 0.6s cubic-bezier(0.87, 0, 0.13, 1);
    display: flex; align-items: center; justify-content: center;
}
.evolution-drawer.active { clip-path: circle(150% at 90% 90%); }
.evo-content { width: 800px; max-width: 90%; }
.evo-header { display: flex; justify-content: space-between; margin-bottom: 50px; border-bottom: 4px solid #fff; }
.evo-header h2 { font-family: var(--font-impact); font-size: 3rem; color: #fff; margin: 0; }
.close-evo { background: none; border: none; color: var(--bl-cyan); font-size: 3rem; cursor: pointer; }
.evo-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 50px; }
.evo-col h3 { font-family: var(--font-impact); color: var(--bl-cyan); font-size: 1.5rem; margin-bottom: 20px; }
.skill-row { display: flex; justify-content: space-between; margin-bottom: 15px; border-bottom: 1px solid #333; }
.skill-row label { font-weight: bold; color: #666; }
.skill-row input { background: transparent; border: none; color: #fff; text-align: right; font-family: var(--font-tech); font-size: 1.5rem; width: 80px; outline: none; }
.skill-row input:focus { color: var(--bl-cyan); }
#ui-stats-btn { width: 100%; margin-top: 40px; padding: 20px; background: transparent; border: 2px solid #fff; color: #fff; font-family: var(--font-impact); font-size: 2rem; cursor: pointer; transition: 0.3s; }
#ui-stats-btn:hover { background: #fff; color: #000; letter-spacing: 5px; }

.modal-limbo { display: none; position: fixed; inset: 0; background: #000; z-index: 300; justify-content: center; align-items: center; }
.modal-prism { border: 1px solid var(--bl-cyan); padding: 10px; box-shadow: 0 0 100px var(--bl-cyan); }
.modal-controls { display: flex; gap: 20px; margin-top: 20px; }
.modal-controls button { flex: 1; padding: 15px; border: none; font-family: var(--font-impact); font-size: 1.2rem; cursor: pointer; }
#close-modal { background: #222; color: #fff; }
#copy-stats-btn { background: var(--bl-cyan); color: #000; }